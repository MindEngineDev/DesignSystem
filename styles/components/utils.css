/* ===============================
   Utils.css
   =============================== */

/* ===============================
   Skip Links
   =============================== */
.skip-link {
  position: absolute;
  left: -999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus {
  position: absolute;
  left: var(--space-sm);
  top: var(--space-sm);
  width: auto;
  height: auto;
  padding: var(--space-xs) var(--space-sm);
  background: var(--surface-raised, var(--dark-700));
  color: var(--light-100);
  border-radius: var(--radius-soft);
  box-shadow: var(--elevation-sm);
  z-index: 1000;
}
/* ===============================
   Body Text
   =============================== */
p,
.text-body {
  font-family: var(--ff-body);
  font-size: var(--fs-body);
  font-weight: var(--fw-body, var(--font-weight-regular));
  line-height: var(--lh-body);
  letter-spacing: var(--ls-body);
  color: var(--col-body, var(--light-200));
}

small,
.text-sm {
  font-size: var(--font-size-sm);
  line-height: var(--line-height-sm);
}

.text-xs {
  font-size: var(--font-size-xs);
  line-height: var(--line-height-sm);
}

.text-lg {
  font-size: var(--font-size-lg);
  line-height: var(--line-height-md);
}
.text-xl {
  font-size: var(--font-size-xl);
  line-height: var(--line-height-lg);
}


/* ===============================
   Links
   =============================== */
.link {
  font-family: var(--ff-link, var(--ff-body));
  font-size: var(--fs-link, var(--font-size-md));
  font-weight: var(--fw-link, var(--font-weight-medium));
  letter-spacing: var(--ls-link, var(--letter-space-sm));
  color: var(--col-link, var(--primary-200));
  text-decoration: none;
  transition: color 0.2s ease-in-out;
}

/* Active navigation link */
.nav-link.is-active, .nav-link[aria-current="page"] {
  position: relative;
  color: var(--primary-200);
  font-weight: var(--font-weight-semibold, 600);
}
.nav-link.is-active::after, .nav-link[aria-current="page"]::after {
  content: "";
  position: absolute;
  left: 0; bottom: -0.4rem;
  width: 100%; height: 2px;
  background: linear-gradient(90deg, var(--primary-300), var(--secondary-300));
  border-radius: 2px;
}


/* ===============================
   Icons
   =============================== */
.icon {
  font-size: var(--fs-icon, var(--font-size-lg));
  line-height: 1;
  color: inherit;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Icon helpers */
.icon {
  display: inline-block;
  line-height: 1;
  vertical-align: middle;
}
.icon-2xs {
  width: var(--size-2xs, 0.5rem);
  height: var(--size-2xs, 0.5rem);
  font-size: var(--size-2xs, 0.5rem);
}
.icon-xs {
  width: var(--size-xs, 0.75rem);
  height: var(--size-xs, 0.75rem);
  font-size: var(--size-xs, 0.75rem);
}
.icon-sm {
  width: var(--size-sm, 1rem);
  height: var(--size-sm, 1rem);
  font-size: var(--size-sm, 1rem);
}
.icon-md {
  width: var(--size-md, 1.5rem);
  height: var(--size-md, 1.5rem);
  font-size: var(--size-md, 1.5rem);
}
.icon-lg {
  width: var(--size-lg, 2rem);
  height: var(--size-lg, 2rem);
  font-size: var(--size-lg, 2rem);
}
.icon-xl {
  width: var(--size-xl, 3rem);
  height: var(--size-xl, 3rem);
  font-size: var(--size-xl, 3rem);
}
.icon-2xl {
  width: var(--size-2xl, 4rem);
  height: var(--size-2xl, 4rem);
  font-size: var(--size-2xl, 4rem);
}

.icon-accent {color: var(--accent-400, var(--primary-400));}
.icon-muted {color: var(--text-muted, var(--dark-300));}

.elevation-xs {box-shadow: var(--elevation-xs);}
.elevation-sm {box-shadow: var(--elevation-sm);}
.elevation-md {box-shadow: var(--elevation-md);}
.elevation-lg {box-shadow: var(--elevation-lg);}
.elevation-xl {box-shadow: var(--elevation-xl);}

/* ===============================
   Utility Classes
   =============================== */

/* Section background helpers only (spacing handled in layout.css) */
.section-dark {
  background: var(--dark-700);
  color: var(--light-200);
}

.section-light {
  background: var(--light-200);
  color: var(--dark-800);
}

.btn-fill {
width: 100%;
}

.btn-fit {
  width: fit-content;
}

/* Colors */
.text-primary {color: var(--primary-300);}
.text-secondary {color: var(--secondary-300);}
.text-light {color: var(--light-200);}
.text-dark {color: var(--dark-800);}
.text-gray {color: var(--dark-300);}

.bg-primary {background: var(--primary-300);}
.bg-secondary { background: var(--secondary-300);}
.bg-light {background: var(--light-200);}
.bg-dark { background: var(--dark-800);}
.bg-gray {background: var(--dark-500);}

/* Spacing Utilities */
.mt-xs {margin-top: var(--space-xs);}
.mt-sm {margin-top: var(--space-sm);}
.mt-md {margin-top: var(--space-md);}
.mt-lg {margin-top: var(--space-lg);}
.mt-xl {margin-top: var(--space-xl);}
.mb-xs {margin-bottom: var(--space-xs);}
.mb-sm {margin-bottom: var(--space-sm);}
.mb-md {margin-bottom: var(--space-md);}
.mb-lg {margin-bottom: var(--space-lg);}
.mb-xl {margin-bottom: var(--space-xl);}

/* Axis utilities */
.mx-auto { margin-left: auto; margin-right: auto; }

.p-xs {padding: var(--space-xs);}
.p-sm {padding: var(--space-sm);}
.p-md {padding: var(--space-md);}
.p-lg {padding: var(--space-lg);}
.p-xl {padding: var(--space-xl);}

.gp-xs {gap: var(--space-xs);}
.gp-sm {gap: var(--space-sm);}
.gp-md {gap: var(--space-md);}
.gp-lg {gap: var(--space-lg);}
.gp-xl {gap: var(--space-xl);}

/* Text Alignment */
.text-center {text-align: center;}
.text-left {text-align: left;}
.text-right {text-align: right;}
.text-uppercase {text-transform: uppercase;}

/* Display */
.d-flex {display: flex;}
.d-grid {display: grid;}
.d-none {display: none;}

/* Container helpers */
.container-narrow { max-width: 56rem; margin-inline: auto; padding-inline: var(--space-md); }
.container-wide { max-width: 90rem; margin-inline: auto; padding-inline: var(--space-lg); }
.container-full { width:100%; margin:0; padding-inline: var(--space-md); }

/* Responsive gap utilities */
@media (min-width: 48em){
  .gp-responsive-sm { gap: var(--space-sm); }
  .gp-responsive-md { gap: var(--space-md); }
  .gp-responsive-lg { gap: var(--space-lg); }
}

/* Auto-fit grids */
.grid-auto-sm { display:grid; grid-template-columns: repeat(auto-fit, minmax(14rem,1fr)); gap: var(--gap-md); }
.grid-auto-md { display:grid; grid-template-columns: repeat(auto-fit, minmax(18rem,1fr)); gap: var(--gap-md); }
.grid-auto-lg { display:grid; grid-template-columns: repeat(auto-fit, minmax(22rem,1fr)); gap: var(--gap-lg, var(--space-xl)); }

/* Responsive visibility */
@media (max-width: 50em){ .hide-sm { display:none; } }
@media (max-width: 65em){ .hide-md { display:none; } }
@media (max-width: 80em){ .hide-lg { display:none; } }
@media (min-width: 50.0625em){ .show-sm { display:initial; } }
@media (min-width: 65.0625em){ .show-md { display:initial; } }
@media (min-width: 80.0625em){ .show-lg { display:initial; } }

/* Flex Utilities */
.flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}
.flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.flex-col {
  display: flex;
  flex-direction: column;
}
.flex-row {
  display: flex;
  flex-direction: row;
}

/* Grid Utilities */
.grid-2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--gap-md);
}
.grid-3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--gap-md);
}
.grid-4 {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--gap-md);
}

@media (max-width: 1024px) {
  .grid-3,
  .grid-4 {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 768px) {
  .grid-2,
  .grid-3,
  .grid-4 {
    grid-template-columns: 1fr;
  }
  .flex-row {
    flex-direction: column;
  }
}

/* ===============================
   Flow / Stack Utility
   =============================== */
.flow > * + * {
  margin-top: var(--flow-space, 1.5rem);
}
/* Dense variation for tighter groups */
.flow-dense {
  --flow-space: var(--space-3);
}
.flow-loose {
  --flow-space: var(--space-7);
}

/* Inline style replacements (about page) */
.maxw-60 {
  max-width: 60ch;
}
.maxw-62 {
  max-width: 62ch;
}
.maxw-68 {
  max-width: 68ch;
}
.metrics-inline {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-4);
  justify-content: center;
}
.metrics-inline li {
  font-size: var(--font-size-sm);
  letter-spacing: 0.5px;
  background: var(--dark-600);
  padding: var(--space-2) var(--space-4);
  border-radius: 999px;
}
.flow-tight {
  --flow-space: var(--space-4);
}
.flow-x-tight {
  --flow-space: var(--space-3);
}

/* Heading spacing when used inside flow blocks (fine tune larger display headings) */
.flow h1 + * {
  margin-top: var(--space-5);
}
.flow h2 + * {
  margin-top: var(--space-4);
}
.flow h3 + * {
  margin-top: var(--space-4);
}
.flow h4 + * {
  margin-top: var(--space-3);
}
.flow h5 + * {
  margin-top: var(--space-3);
}
.flow h6 + * {
  margin-top: var(--space-2);
}

/* Remove top margin for first child in nested flows */
.flow > .flow {
  margin-top: var(--flow-space);
}

/* Additional layout helpers introduced during inline style refactor */
.mt-lg { margin-top: var(--space-lg); }
.full-width { width:100%; }
.form-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap: var(--gap-md); max-width:640px; }
.full-span { grid-column: 1 / -1; }
